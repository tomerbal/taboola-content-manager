var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};
$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$(document).ready(function(){getCountries();getBrands();getAllData(0);initFilter();initInsert();initWidget()});
function getBrands(){$.get("/brand/get-all",function(a){if(200!==a.status)$("#genericMessage").text("There was an error retrieving brands"),$("#genericCode").text(a.status),$("#genericModal").modal();else{for(var b in a.brands)brands.push({text:a.brands[b],id:parseInt(b)});var c=$("#brandInput"),d=$("#brandInputEdit"),e=$("#brandInputFilter");$("#brandChooser").select2({data:brands,placeholder:brands[0].text}).on("select2:select",function(a){c.attr("val",a.params.data.text)});$("#brandChooserEdit").select2({data:brands,
placeholder:brands[0].text}).on("select2:select",function(a){d.attr("val",a.params.data.text)});$("#brandChooserFilter").select2({data:brands,placeholder:brands[0].text}).on("change",function(a){a=$(this).val();var b=[],c;for(c in a){var d=parseInt(a[c]),f;for(f in brands){var g=brands[f];g.id===d&&b.push(g.text)}}e.attr("val",b.join(";"))});c.attr("val",brands[0].text)}}).fail(function(a){$("#genericMessage").text("There was an error retrieving brands");$("#genericCode").text(a.status);$("#genericModal").modal()})}
function getCountries(){$.get("/country/get-all",function(a){if(200!==a.status)$("#genericMessage").text("There was an error retrieving countries"),$("#genericCode").text(a.status),$("#genericModal").modal();else{for(var b in a.countries)countries.push({text:a.countries[b].name,id:parseInt(b)});var c=$("#countryInput"),d=$("#countryInputEdit"),e=$("#countryInputFilter");$("#countryChooser").select2({data:countries,placeholder:countries[0].text}).on("select2:select",function(a){c.attr("val",a.params.data.text)});
$("#countryChooserEdit").select2({data:countries,placeholder:countries[0].text}).on("select2:select",function(a){d.attr("val",a.params.data.text)});$("#countryChooserFilter").select2({data:countries,placeholder:countries[0].text}).on("change",function(a){a=$(this).val();var b=[],c;for(c in a){var d=parseInt(a[c]),f;for(f in countries){var g=countries[f];g.id===d&&b.push(g.text)}}e.attr("val",b.join(";"))});c.attr("val",countries[0].text)}}).fail(function(a){$("#genericMessage").text("There was an error retrieving countries");
$("#genericCode").text(a.status);$("#genericModal").modal()})}function getAllData(a){$.get("/content-item/get-all-content-items/"+a+"/"+config.batchSize,function(b){200!==b.status?($("#genericMessage").text("There was an error retrieving the data"),$("#genericCode").text(b.status),$("#genericModal").modal()):fillDashboard(a,b)}).fail(function(a){$("#genericMessage").text("There was an error retrieving the data");$("#genericCode").text(a.status);$("#errorModal").modal()})}
function initDashboard(){$('[data-toggle="tooltip"]').tooltip();$('table tbody input[type="checkbox"]').click(function(){var a=this.checked,b=$(this).closest("tr"),c=b.attr("itemId"),d=b.find(".country").text(),e=b.find(".brand").text(),f=b.find(".title").text();b=b.find(".img img").attr("src");var h=Object.keys(config.chosenItems).length;a?h===config.widgetSize?($("#genericMessage").text("Please choose up tp "+config.widgetSize+" items"),$("#genericCode").text(),$("#genericModal").modal(),this.checked=
!1):config.chosenItems[c]={country:d,brand:e,title:f,img:b}:delete config.chosenItems[c]})}
function fillDashboard(a,b){$("#dashboardTableBody").html("");var c=a*config.batchSize+1,d=c+b.contentItems.length-1;$("#showingTo").text(d);$("#showingFrom").text(c);0===a?$("#previousButton").hide():$("#previousButton").show();$("#outOf").text(b.outOf);c=b.outOf/config.batchSize;0<b.outOf%config.batchSize&&c++;$(".page-item").not("#firstPage").remove();d=$("#paginationList #firstPage");1===a+1&&$("#firstPage").addClass("active");for(var e=2;e<=c;e++)e===a+1?d.after('<li class="page-item active"><a class="page-link" onclick="paging(this)">'+
e+"</a></li>"):d.after('<li class="page-item"><a class="page-link" onclick="paging(this)">'+e+"</a></li>"),d=$(".page-item").last();$.get("../htmls/item-content.html",function(a){for(var c in b.contentItems){var d=b.contentItems[c],e=$($.parseHTML(a));e.find(".itemContentInputCheckbox").attr("id","checkbox"+c);e.find(".itemContentInputLabel").attr("for","checkbox"+c);e.find(".country").text(d.countryName);e.find(".brand").text(d.brandName);e.find(".title").text(d.title);e.find(".img img").attr("src",
d.img);e.attr("itemId",d.id);$("#dashboardTableBody").append(e)}initDashboard()})}function paging(a){$(".pagination").find(".active").removeClass("active");a=parseInt(a.innerText)-1;0<Object.keys(config.filters).length?getFilteredData(a,!0):getAllData(a)};
